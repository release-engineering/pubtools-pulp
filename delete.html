<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>delete &#8212; pubtools-pulp  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=1fc5d657" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=b3ba4146"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="fix-cves" href="fix-cves.html" />
    <link rel="prev" title="clear-repo" href="clear-repo.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="delete">
<h1>delete<a class="headerlink" href="#delete" title="Permalink to this heading">¶</a></h1>
<p><p>Remove specific content from one or more Pulp repository</p>
</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">usage</span><span class="p">:</span> <span class="n">pubtools</span><span class="o">-</span><span class="n">pulp</span><span class="o">-</span><span class="n">delete</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">debug</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">udcache</span><span class="o">-</span><span class="n">url</span> <span class="n">UDCACHE_URL</span><span class="p">]</span>
                            <span class="p">[</span><span class="o">--</span><span class="n">udcache</span><span class="o">-</span><span class="n">user</span> <span class="n">UDCACHE_USER</span><span class="p">]</span>
                            <span class="p">[</span><span class="o">--</span><span class="n">udcache</span><span class="o">-</span><span class="n">password</span> <span class="n">UDCACHE_PASSWORD</span><span class="p">]</span>
                            <span class="p">[</span><span class="o">--</span><span class="n">udcache</span><span class="o">-</span><span class="n">certificate</span> <span class="n">UDCACHE_CERTIFICATE</span><span class="p">]</span>
                            <span class="p">[</span><span class="o">--</span><span class="n">udcache</span><span class="o">-</span><span class="n">certificate</span><span class="o">-</span><span class="n">key</span> <span class="n">UDCACHE_CERTIFICATE_KEY</span><span class="p">]</span>
                            <span class="p">[</span><span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">url</span> <span class="n">PULP_URL</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">user</span> <span class="n">PULP_USER</span><span class="p">]</span>
                            <span class="p">[</span><span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">password</span> <span class="n">PULP_PASSWORD</span><span class="p">]</span>
                            <span class="p">[</span><span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">certificate</span> <span class="n">PULP_CERTIFICATE</span><span class="p">]</span>
                            <span class="p">[</span><span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">certificate</span><span class="o">-</span><span class="n">key</span> <span class="n">PULP_CERTIFICATE_KEY</span><span class="p">]</span>
                            <span class="p">[</span><span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">insecure</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">throttle</span> <span class="n">PULP_THROTTLE</span><span class="p">]</span>
                            <span class="p">[</span><span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">fake</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">clean</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">force</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">repo</span> <span class="n">REPO</span><span class="p">]</span>
                            <span class="p">[</span><span class="o">--</span><span class="n">advisory</span> <span class="n">ADVISORY</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">file</span> <span class="n">FILE</span><span class="p">]</span>
                            <span class="p">[</span><span class="o">--</span><span class="n">signing</span><span class="o">-</span><span class="n">key</span> <span class="n">SIGNING_KEY</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">allow</span><span class="o">-</span><span class="n">unsigned</span><span class="p">]</span>
                            <span class="p">[</span><span class="o">--</span><span class="n">skip</span> <span class="n">SKIP</span><span class="p">]</span>
</pre></div>
</div>
<section id="named-arguments">
<h2>Named Arguments<a class="headerlink" href="#named-arguments" title="Permalink to this heading">¶</a></h2>
<dl class="option-list">
<dt><kbd>--debug, -d</kbd></dt>
<dd><p>Show debug logs; can be provided up to three times to enable more logs</p>
<p>Default: 0</p>
</dd>
<dt><kbd>--repo</kbd></dt>
<dd><p>remove content from these comma-seperated repositories</p>
</dd>
<dt><kbd>--advisory</kbd></dt>
<dd><p>remove packages and modules in these comma-separated advisories</p>
</dd>
<dt><kbd>--file</kbd></dt>
<dd><p>remove these comma-separated rpm, srpm, modulemd or iso file(s)</p>
</dd>
<dt><kbd>--signing-key</kbd></dt>
<dd><p>remove the content with these signing-keys(s)</p>
</dd>
<dt><kbd>--allow-unsigned</kbd></dt>
<dd><p>remove unsigned content</p>
<p>Default: False</p>
</dd>
<dt><kbd>--skip</kbd></dt>
<dd><p>skip given comma-separated sub-steps</p>
</dd>
</dl>
</section>
<section id="unified-downloads-cache-environment">
<h2>Unified Downloads Cache environment<a class="headerlink" href="#unified-downloads-cache-environment" title="Permalink to this heading">¶</a></h2>
<dl class="option-list">
<dt><kbd>--udcache-url</kbd></dt>
<dd><p>Base URL of UD cache flush API; if omitted, UD cache flush features are disabled.</p>
</dd>
<dt><kbd>--udcache-user</kbd></dt>
<dd><p>Username for UD cache flush</p>
</dd>
<dt><kbd>--udcache-password</kbd></dt>
<dd><p>Password for UD cache flush (or set UDCACHE_PASSWORD)</p>
<p>Default: “”</p>
</dd>
<dt><kbd>--udcache-certificate</kbd></dt>
<dd><p>Client certificate for UD cache flush (or set UDCACHE_CERT)</p>
<p>Default: “”</p>
</dd>
<dt><kbd>--udcache-certificate-key</kbd></dt>
<dd><p>Client key for UD cache flush (or set UDCACHE_KEY)</p>
<p>Default: “”</p>
</dd>
</dl>
</section>
<section id="pulp-environment">
<h2>Pulp environment<a class="headerlink" href="#pulp-environment" title="Permalink to this heading">¶</a></h2>
<dl class="option-list">
<dt><kbd>--pulp-url</kbd></dt>
<dd><p>Pulp server URL</p>
</dd>
<dt><kbd>--pulp-user</kbd></dt>
<dd><p>Pulp username</p>
</dd>
<dt><kbd>--pulp-password</kbd></dt>
<dd><p>Pulp password (or set PULP_PASSWORD environment variable)</p>
</dd>
<dt><kbd>--pulp-certificate</kbd></dt>
<dd><p>Pulp certificate. Can also be a single file (.pem)</p>
</dd>
<dt><kbd>--pulp-certificate-key</kbd></dt>
<dd><p>Pulp certificate key</p>
</dd>
<dt><kbd>--pulp-insecure</kbd></dt>
<dd><p>Allow unverified HTTPS connection to Pulp</p>
<p>Default: False</p>
</dd>
<dt><kbd>--pulp-throttle</kbd></dt>
<dd><p>Allows to enqueue or run only specified number of Pulp tasks at one moment (or set PULP_THROTTLE environment variable)</p>
</dd>
<dt><kbd>--pulp-fake</kbd></dt>
<dd><p>Use a fake in-memory Pulp client rather than interacting with a real server. For development/testing only, may have limited functionality.</p>
<p>Default: False</p>
</dd>
</dl>
</section>
<section id="publish-options">
<h2>Publish options<a class="headerlink" href="#publish-options" title="Permalink to this heading">¶</a></h2>
<p>Options affecting the behavior of Pulp repo publishes.</p>
<dl class="option-list">
<dt><kbd>--clean</kbd></dt>
<dd><p>attempt to delete remote content not in the repo</p>
<p>Default: False</p>
</dd>
<dt><kbd>--force</kbd></dt>
<dd><p>force publish of repos even if Pulp thinks nothing has changed</p>
<p>Default: False</p>
</dd>
</dl>
</section>
<section id="example-file">
<h2>Example: File<a class="headerlink" href="#example-file" title="Permalink to this heading">¶</a></h2>
<p>A typical invocation of delete file would look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pubtools</span><span class="o">-</span><span class="n">pulp</span><span class="o">-</span><span class="n">delete</span> \
  <span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">url</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">pulp</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span> \
  <span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">user</span> <span class="n">admin</span> \
  <span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">password</span> <span class="n">XXXXX</span> \
  <span class="o">--</span><span class="n">file</span> <span class="n">some</span><span class="o">-</span><span class="n">pkg</span><span class="o">-</span><span class="mf">1.3</span><span class="o">-</span><span class="mf">1.</span><span class="n">el8_x86_64</span><span class="o">.</span><span class="n">rpm</span> \
  <span class="o">--</span><span class="n">signing</span><span class="o">-</span><span class="n">key</span> <span class="n">aabbcc</span> \
  <span class="o">--</span><span class="n">repo</span> <span class="n">some</span><span class="o">-</span><span class="n">yumrepo</span>
</pre></div>
</div>
<p>Mentioned file with the signing key will be removed from the
repo. If there are multiple files and repos, each file will
be removed from the repos they belong to. All those repos will
then be published.</p>
</section>
<section id="example-mix-file-types">
<h2>Example: Mix file types<a class="headerlink" href="#example-mix-file-types" title="Permalink to this heading">¶</a></h2>
<p>File provided in <code class="docutils literal notranslate"><span class="pre">`--file`</span></code> could either be a RPM(rpm name),
ISO(filename) or ModuleMD(N:S:V:C:A) file. Different file types
could be included in the same command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pubtools</span><span class="o">-</span><span class="n">pulp</span><span class="o">-</span><span class="n">delete</span> \
  <span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">url</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">pulp</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span> \
  <span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">user</span> <span class="n">admin</span> \
  <span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">password</span> <span class="n">XXXXX</span> \
  <span class="o">--</span><span class="n">file</span> <span class="n">some</span><span class="o">-</span><span class="n">pkg</span><span class="o">-</span><span class="mf">1.3</span><span class="o">-</span><span class="mf">1.</span><span class="n">el8_x86_64</span><span class="o">.</span><span class="n">rpm</span> \
  <span class="o">--</span><span class="n">file</span> <span class="n">some</span><span class="o">-</span><span class="n">file</span><span class="o">.</span><span class="n">iso</span><span class="p">,</span><span class="n">some</span><span class="o">-</span><span class="n">modmd</span><span class="p">:</span><span class="n">s1</span><span class="p">:</span><span class="mi">123</span><span class="p">:</span><span class="n">a1c2</span><span class="p">:</span><span class="n">s390x</span> \
  <span class="o">--</span><span class="n">signing</span><span class="o">-</span><span class="n">key</span> <span class="n">aabbcc</span> \
  <span class="o">--</span><span class="n">repo</span> <span class="n">some</span><span class="o">-</span><span class="n">yumrepo</span> \
  <span class="o">--</span><span class="n">repo</span> <span class="n">some</span><span class="o">-</span><span class="n">filerepo</span>
</pre></div>
</div>
<p>Signing key will be used wherever applicable.</p>
</section>
<section id="example-advisory">
<h2>Example: Advisory<a class="headerlink" href="#example-advisory" title="Permalink to this heading">¶</a></h2>
<p>Packages from an advisory could be removed by providing the advisory ID and the
repos to be removed from. All the packages and the modules that were pushed to
the provided repos as part of the advisory will be removed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pubtools</span><span class="o">-</span><span class="n">pulp</span><span class="o">-</span><span class="n">delete</span> \
  <span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">url</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">pulp</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span> \
  <span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">user</span> <span class="n">admin</span> \
  <span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">password</span> <span class="n">XXXXX</span> \
  <span class="o">--</span><span class="n">advisory</span> <span class="n">RHBA</span><span class="o">-</span><span class="mi">2020</span><span class="p">:</span><span class="mi">1234</span> \
  <span class="o">--</span><span class="n">repo</span> <span class="n">some</span><span class="o">-</span><span class="n">yumrepo</span> \
  <span class="o">--</span><span class="n">repo</span> <span class="n">some</span><span class="o">-</span><span class="n">filerepo</span>
</pre></div>
</div>
</section>
<section id="example-mix-files-and-advisory">
<h2>Example: Mix files and advisory<a class="headerlink" href="#example-mix-files-and-advisory" title="Permalink to this heading">¶</a></h2>
<p>Removing files and packages from the advisory could be requested in the same request.
They will be removed from the provided applicable repos.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pubtools</span><span class="o">-</span><span class="n">pulp</span><span class="o">-</span><span class="n">delete</span> \
  <span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">url</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">pulp</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span> \
  <span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">user</span> <span class="n">admin</span> \
  <span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">password</span> <span class="n">XXXXX</span> \
  <span class="o">--</span><span class="n">advisory</span> <span class="n">RHBA</span><span class="o">-</span><span class="mi">2020</span><span class="p">:</span><span class="mi">1234</span> \
  <span class="o">--</span><span class="n">file</span> <span class="n">some</span><span class="o">-</span><span class="n">pkg</span><span class="o">-</span><span class="mf">1.3</span><span class="o">-</span><span class="mf">1.</span><span class="n">el8_x86_64</span><span class="o">.</span><span class="n">rpm</span> \
  <span class="o">--</span><span class="n">file</span> <span class="n">some</span><span class="o">-</span><span class="n">file</span><span class="o">.</span><span class="n">iso</span><span class="p">,</span><span class="n">some</span><span class="o">-</span><span class="n">modmd</span><span class="p">:</span><span class="n">s1</span><span class="p">:</span><span class="mi">123</span><span class="p">:</span><span class="n">a1c2</span><span class="p">:</span><span class="n">s390x</span> \
  <span class="o">--</span><span class="n">signing</span><span class="o">-</span><span class="n">key</span> <span class="n">aabbcc</span> \
  <span class="o">--</span><span class="n">repo</span> <span class="n">some</span><span class="o">-</span><span class="n">yumrepo</span>
  <span class="o">--</span><span class="n">repo</span> <span class="n">some</span><span class="o">-</span><span class="n">filerepo</span>
</pre></div>
</div>
</section>
<section id="example-skip-publish">
<h2>Example: Skip publish<a class="headerlink" href="#example-skip-publish" title="Permalink to this heading">¶</a></h2>
<p>The repos are published and the caches are cleaned(provided required arguments)
by default. This can skipped by providing <code class="docutils literal notranslate"><span class="pre">`--skip`</span></code> option with the publish
step name i.e. <code class="docutils literal notranslate"><span class="pre">`--skip</span> <span class="pre">publish`</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pubtools</span><span class="o">-</span><span class="n">pulp</span><span class="o">-</span><span class="n">delete</span> \
  <span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">url</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">pulp</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span> \
  <span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">user</span> <span class="n">admin</span> \
  <span class="o">--</span><span class="n">pulp</span><span class="o">-</span><span class="n">password</span> <span class="n">XXXXX</span> \
  <span class="o">--</span><span class="n">file</span> <span class="n">some</span><span class="o">-</span><span class="n">pkg</span><span class="o">-</span><span class="mf">1.3</span><span class="o">-</span><span class="mf">1.</span><span class="n">el8_x86_64</span><span class="o">.</span><span class="n">rpm</span> \
  <span class="o">--</span><span class="n">signing</span><span class="o">-</span><span class="n">key</span> <span class="n">aabbcc</span> \
  <span class="o">--</span><span class="n">repo</span> <span class="n">some</span><span class="o">-</span><span class="n">yumrepo</span> \
  <span class="o">--</span><span class="n">skip</span> <span class="n">publish</span>
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pubtools-pulp</a></h1>



<p class="blurb">Publishing tools for Pulp</p>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Command Reference:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="clear-repo.html">clear-repo</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">delete</a></li>
<li class="toctree-l1"><a class="reference internal" href="fix-cves.html">fix-cves</a></li>
<li class="toctree-l1"><a class="reference internal" href="garbage-collect.html">garbage-collect</a></li>
<li class="toctree-l1"><a class="reference internal" href="publish.html">publish</a></li>
<li class="toctree-l1"><a class="reference internal" href="push.html">push</a></li>
<li class="toctree-l1"><a class="reference internal" href="set-maintenance.html">set-maintenance</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://github.com/release-engineering/pubtools-pulp">Source</a></li>
    
    <li class="toctree-l1"><a href="https://pypi.org/project/pubtools-pulp">PyPI</a></li>
    
    <li class="toctree-l1"><a href="genindex.html">Index</a></li>
    
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="clear-repo.html" title="previous chapter">clear-repo</a></li>
      <li>Next: <a href="fix-cves.html" title="next chapter">fix-cves</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Red Hat.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/delete.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/release-engineering/pubtools-pulp" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>